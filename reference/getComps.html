<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Aggregate length, age, or age-at-length composition data by strata — getComps • pacfintools</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Aggregate length, age, or age-at-length composition data by strata — getComps"><meta property="og:description" content="getComps() first sets up the local environment and returns summaries by
groupings."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pacfintools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/sablefish_example.html">Working through sablefish PacFIN data</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Aggregate length, age, or age-at-length composition data by strata</h1>

    <div class="hidden name"><code>getComps.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>getComps()</code> first sets up the local environment and returns summaries by
groupings.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">getComps</span><span class="op">(</span></span>
<span>  <span class="va">Pdata</span>,</span>
<span>  strat <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  Comps <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"LEN"</span>, <span class="st">"AGE"</span>, <span class="st">"AAL"</span><span class="op">)</span>,</span>
<span>  defaults <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fleet"</span>, <span class="st">"fishyr"</span>, <span class="st">"season"</span><span class="op">)</span>,</span>
<span>  towid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SAMPLE_NO"</span><span class="op">)</span>,</span>
<span>  weightid <span class="op">=</span> <span class="st">"Final_Sample_Size_L"</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-pdata">Pdata<a class="anchor" aria-label="anchor" href="#arg-pdata"></a></dt>
<dd><p>A data frame returned from <code><a href="PullBDS.PacFIN.html">PullBDS.PacFIN()</a></code> containing
biological samples. These data are stored in the Pacific Fishieries
Information Network (PacFIN) data warehouse, which originated in 2014 and
are pulled using sql calls.</p></dd>


<dt id="arg-strat">strat<a class="anchor" aria-label="anchor" href="#arg-strat"></a></dt>
<dd><p>A vector of column names to stratify the output over. For
example, if you wish to summarize by ageing method, then the argument
would look like <code>strat = "agemethod"</code> or, if you want to look at fleets
and gear, <code>strat = c("fleet", "usegear")</code>.</p></dd>


<dt id="arg-comps">Comps<a class="anchor" aria-label="anchor" href="#arg-comps"></a></dt>
<dd><p>The type of composition data to create. See the function call
for the available options. The first option listed is the default, which
creates conditional age-at-length compositions by adding both <code>lengthcm</code>
and <code>Age</code> to the grouping structure.</p></dd>


<dt id="arg-defaults">defaults<a class="anchor" aria-label="anchor" href="#arg-defaults"></a></dt>
<dd><p>The default stratification columns which will typically be
left at their default value of <code>c("fleet", "fishyr", "season")</code>.</p></dd>


<dt id="arg-towid">towid<a class="anchor" aria-label="anchor" href="#arg-towid"></a></dt>
<dd><p>A vector of character values providing the column names that
generate a unique id for each sample. The default is <code>"SAMPLE_NO"</code> but you
can pass a vector where all of the columns identified will be united to
create a unique identifier for the tow/sample.</p></dd>


<dt id="arg-weightid">weightid<a class="anchor" aria-label="anchor" href="#arg-weightid"></a></dt>
<dd><p>A character value giving the column name that holds the value
to be summed for each type and strata, such as <code>weightid = "Final_Sample_Size_L"</code>, if you are interested in length data. Instead of
the default, you might want to weight each stratification by the final
sample sizes found for age data, i.e., <code>weightid = "Final_Sample_Size_A"</code>.
You can pass <code>weightid</code> any column that exists in <code>Pdata</code>. Legacy code did
not allow you to name the column and <code>Final_Sample_Size</code> was hard coded in
the function.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>A logical specifying if output should be written to the
screen or not. Good for testing and exploring your data but can be turned
off when output indicates information that you already know. The printing
of output to the screen does not affect any of the returned objects. The
default is to always print to the screen, i.e., <code>verbose = TRUE</code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A long data frame of weights for each grouping structure. Columns identifying
the grouping structures will come first, followed by columns with sample
sizes per group by sex category. The documentation for these sample size
columns is sparse because this function is set to be deprecated next cycle
and replaced with a simplified path to writing composition data. But,
information is present for males (abbreviated with an M), females
(abbreviated with an F), unsexed (abbreviated with a U). If no sex is
provided then it is assumed all are unsexed and will be returned as such.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This function uses the expansions created in <code><a href="getExpansion_1.html">getExpansion_1()</a></code> and
<code><a href="getExpansion_2.html">getExpansion_2()</a></code> using <code>"weightid"</code>. Thus, whatever column name is passed
to <code>weightid</code> will be used as the weight for each group. See the
documentation for the pass-through arguments, i.e., <code>...</code>. If you are
interested in generating unexpanded comps, then use the <code>get_raw_comps()</code>
function from the nwfscSurvey package.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index">
<ul><li><p><code><a href="getExpansion_2.html">getExpansion_2()</a></code> should be run before this function.</p></li>
<li><p><code><a href="writeComps.html">writeComps()</a></code> can be run on the output from this function.</p></li>
</ul></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Andi Stephens, Kelli F. Johnson</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Chantel R. Wetzel, Ian G. Taylor, Kelli F. Johnson.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

